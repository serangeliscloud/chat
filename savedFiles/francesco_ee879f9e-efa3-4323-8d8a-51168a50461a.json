{"sender":"francesco","fileName":"francesco_ee879f9e-efa3-4323-8d8a-51168a50461a","fileExtension":".js","fileData":"IyEvdXNyL2Jpbi9lbnYgbm9kZQ0KDQovLyBzZXJ2ZXIuanMNCg0KY29uc3QgbmV0ID0gcmVxdWlyZSgnbmV0Jyk7DQpjb25zdCBmcyA9IHJlcXVpcmUoJ2ZzJyk7DQoNCmNvbnN0IFBPUlQgPSA4MDAwOw0KY29uc3QgQUxMT1dFRF9WRVJTSU9OID0gIjEuMy4wIjsNCg0KLy8gYW5zaSBjb2RlcyBmb3IgY29sb3JzDQpjb25zdCBjb2xvcnMgPSB7DQogICAgcmVzZXQ6ICJceDFiWzBtIiwNCiAgICByZWQ6ICJceDFiWzMxbSIsDQogICAgZ3JlZW46ICJceDFiWzMybSIsDQogICAgeWVsbG93OiAiXHgxYlszM20iLA0KICAgIGJsdWU6ICJceDFiWzM0bSIsDQogICAgbWFnZW50YTogIlx4MWJbMzVtIiwNCiAgICBjeWFuOiAiXHgxYlszNm0iLA0KICAgIHdoaXRlOiAiXHgxYlszN20iDQp9Ow0KDQovLyBDb3VudGVyIGZvciBnZW5lcmF0aW5nIHVuaXF1ZSBjbGllbnQgSURzDQpsZXQgbmV4dENsaWVudElkID0gMTsNCg0KLy8gQXJyYXkgdG8gaG9sZCBjb25uZWN0ZWQgY2xpZW50cywgZWFjaCB3aXRoIGFuIElEDQpjb25zdCBjbGllbnRzID0gW107DQoNCmZ1bmN0aW9uIGdlbmVyYXRlVVVJRCgpIHsNCiAgICAvLyBHZW5lcmF0ZSBhIHJhbmRvbSBoZXhhZGVjaW1hbCBzdHJpbmcgb2YgbGVuZ3RoIDggY2hhcmFjdGVycw0KICAgIGNvbnN0IHM0ID0gKCkgPT4gTWF0aC5mbG9vcigoMSArIE1hdGgucmFuZG9tKCkpICogMHgxMDAwMCkudG9TdHJpbmcoMTYpLnN1YnN0cmluZygxKTsNCg0KICAgIC8vIENvbnN0cnVjdCB0aGUgVVVJRA0KICAgIHJldHVybiBgJHtzNCgpfSR7czQoKX0tJHtzNCgpfS0ke3M0KCl9LSR7czQoKX0tJHtzNCgpfSR7czQoKX0ke3M0KCl9YDsNCn0NCg0KLy8gRnVuY3Rpb24gdG8gYnJvYWRjYXN0IG1lc3NhZ2VzIHRvIGFsbCBjbGllbnRzDQpmdW5jdGlvbiBicm9hZGNhc3QobWVzc2FnZSwgc2VuZGVyKSB7DQogICAgY2xpZW50cy5mb3JFYWNoKGNsaWVudCA9PiB7DQogICAgICAgIC8vIFNlbmQgdGhlIG1lc3NhZ2UgdG8gYWxsIGNsaWVudHMgZXhjZXB0IHRoZSBzZW5kZXINCiAgICAgICAgaWYgKGNsaWVudC5zb2NrZXQgIT09IHNlbmRlcikgew0KICAgICAgICAgICAgY2xpZW50LnNvY2tldC53cml0ZShtZXNzYWdlKTsNCiAgICAgICAgfQ0KICAgIH0pOw0KfQ0KDQovLyBGdW5jdGlvbiB0byBoYW5kbGUgaW5pdGlhbCBtZXNzYWdlcyBmcm9tIGNsaWVudHMgdXBvbiBjb25uZWN0aW9uDQpmdW5jdGlvbiBoYW5kbGVJbml0aWFsTWVzc2FnZShtZXNzYWdlLCBjbGllbnRTb2NrZXQpIHsNCiAgICAvLyBDaGVjayBpZiB0aGUgY2xpZW50IHZlcnNpb24gbWF0Y2hlcyB0aGUgYWxsb3dlZCB2ZXJzaW9uDQogICAgaWYgKG1lc3NhZ2UudHlwZSA9PT0gJ2F1dGhlbnRpY2F0aW9uJyAmJiBtZXNzYWdlLmNsaWVudFZlcnNpb25OdW1iZXIgIT09IEFMTE9XRURfVkVSU0lPTikgew0KICAgICAgICBjb25zb2xlLmxvZyhgQ29ubmVjdGlvbiBmcm9tIGNsaWVudCB3aXRoIHZlcnNpb24gYCtjb2xvcnMueWVsbG93K2Ake21lc3NhZ2UuY2xpZW50VmVyc2lvbk51bWJlcn1gK2NvbG9ycy5yZXNldCtjb2xvcnMucmVkK2AgcmVmdXNlZC5gK2NvbG9ycy5yZWQpOw0KICAgICAgICBjbGllbnRTb2NrZXQuZW5kKCk7IC8vIENsb3NlIHRoZSBjb25uZWN0aW9uIGltbWVkaWF0ZWx5DQogICAgICAgIHJldHVybjsNCiAgICB9DQoNCiAgICAvLyBIYW5kbGUgdGhlIGluaXRpYWwgbWVzc2FnZSBiYXNlZCBvbiBpdHMgdHlwZSBvciBjb250ZW50DQogICAgY29uc29sZS5sb2coY29sb3JzLmdyZWVuK2BhY2NlcHRlZCBjb25uZWN0aW9uIGZyb20gJHttZXNzYWdlLnNlbmRlcn1gK2NvbG9ycy5yZXNldCtgIC0gY2xpZW50IHZlcnNpb246IGArY29sb3JzLnllbGxvdytgJHttZXNzYWdlLmNsaWVudFZlcnNpb25OdW1iZXJ9YCtjb2xvcnMucmVzZXQpOw0KICAgIC8vIFlvdSBjYW4gYXV0aGVudGljYXRlIHRoZSBjbGllbnQsIHZhbGlkYXRlIGl0cyB2ZXJzaW9uLCBldGMuDQoNCiAgICAvLyBCcm9hZGNhc3Qgam9pbiBtZXNzYWdlIHRvIGFsbCBjbGllbnRzDQogICAgY29uc3Qgam9pbk1lc3NhZ2UgPSBKU09OLnN0cmluZ2lmeSh7IHNlbmRlcjogIlNlcnZlciIsIHRleHQ6IGAke21lc3NhZ2Uuc2VuZGVyfSBqb2luZWQgdGhlIGNoYXRgIH0pICsgJ1xyXG4nOw0KICAgIGJyb2FkY2FzdChqb2luTWVzc2FnZSwgY2xpZW50U29ja2V0KTsNCn0NCg0KLy8gRnVuY3Rpb24gdG8gaGFuZGxlIGxlYXZpbmcgbWVzc2FnZXMgZnJvbSBjbGllbnRzDQpmdW5jdGlvbiBoYW5kbGVFeGl0aW5nTWVzc2FnZShtZXNzYWdlLCBjbGllbnRTb2NrZXQpIHsNCiAgICAvLyBCcm9hZGNhc3QgbGVhdmUgbWVzc2FnZSB0byBhbGwgY2xpZW50cw0KICAgIGNvbnN0IGxlYXZlTWVzc2FnZSA9IEpTT04uc3RyaW5naWZ5KHsgc2VuZGVyOiAiU2VydmVyIiwgdGV4dDogYCR7bWVzc2FnZS5zZW5kZXJ9IGxlZnQgdGhlIGNoYXRgIH0pICsgJ1xyXG4nOw0KICAgIGJyb2FkY2FzdChsZWF2ZU1lc3NhZ2UsIGNsaWVudFNvY2tldCk7DQogICAgY29uc29sZS5sb2cobWVzc2FnZS51c2VybmFtZUNvbG9yK2Ake21lc3NhZ2Uuc2VuZGVyfWArY29sb3JzLnJlc2V0K2AgbGVmdCB0aGUgY2hhdGApOw0KfQ0KZnVuY3Rpb24gc2VuZFNlcnZlclRpbWUoY2xpZW50U29ja2V0KSB7DQogICAgY29uc3Qgbm93ID0gbmV3IERhdGUoKTsNCg0KICAgIC8vIEdldCB0aGUgY3VycmVudCB0aW1lIGNvbXBvbmVudHMNCiAgICBjb25zdCBob3VycyA9IG5vdy5nZXRIb3VycygpLnRvU3RyaW5nKCkucGFkU3RhcnQoMiwgJzAnKTsgLy8gQWRkIGxlYWRpbmcgemVybyBpZiBuZWVkZWQNCiAgICBjb25zdCBtaW51dGVzID0gbm93LmdldE1pbnV0ZXMoKS50b1N0cmluZygpLnBhZFN0YXJ0KDIsICcwJyk7DQogICAgY29uc3Qgc2Vjb25kcyA9IG5vdy5nZXRTZWNvbmRzKCkudG9TdHJpbmcoKS5wYWRTdGFydCgyLCAnMCcpOw0KDQogICAgLy8gQ29uc3RydWN0IHRoZSB0aW1lIHN0cmluZyBpbiBISDpNTTpTUyBmb3JtYXQNCiAgICBjb25zdCB0aW1lU3RyaW5nID0gYCR7aG91cnN9OiR7bWludXRlc306JHtzZWNvbmRzfWA7DQogICAgY29uc3QgbWVzc2FnZSA9IHsNCiAgICAgICAgc2VuZGVyOiAiU2VydmVyIiwNCiAgICAgICAgdGV4dDogdGltZVN0cmluZywNCiAgICB9Ow0KICAgIGNsaWVudFNvY2tldC53cml0ZShKU09OLnN0cmluZ2lmeShtZXNzYWdlKSsgJ1xyXG4nICkNCn0NCg0KZnVuY3Rpb24gc2F2ZUZpbGUobWVzc2FnZSwgY2xpZW50U29ja2V0KSB7DQogICAgLy8gQ3JlYXRlIHRoZSBkaXJlY3RvcnkgaWYgaXQgZG9lc24ndCBleGlzdA0KICAgIGNvbnN0IGZvbGRlclBhdGggPSAnLi9zYXZlZEZpbGVzJzsNCiAgICBpZiAoIWZzLmV4aXN0c1N5bmMoZm9sZGVyUGF0aCkpIHsNCiAgICAgICAgZnMubWtkaXJTeW5jKGZvbGRlclBhdGgpOw0KICAgIH0NCiAgICBjb25zdCB1dWlkID0gZ2VuZXJhdGVVVUlEKCkNCiAgICAvLyBHZW5lcmF0ZSBhIHVuaXF1ZSBmaWxlbmFtZSB1c2luZyBzZW5kZXIgbmFtZSBhbmQgZmlsZSBleHRlbnNpb24NCiAgICBjb25zdCBmaWxlTmFtZSA9IGAke21lc3NhZ2Uuc2VuZGVyfV8ke3V1aWR9Lmpzb25gOw0KDQogICAgLy8gQ29uc3RydWN0IHRoZSBmaWxlIHBhdGgNCiAgICBjb25zdCBmaWxlUGF0aCA9IGAke2ZvbGRlclBhdGh9LyR7ZmlsZU5hbWV9YDsNCg0KICAgIC8vIFdyaXRlIHRoZSBmaWxlIGRhdGEgdG8gYSBKU09OIGZpbGUNCiAgICBjb25zdCBqc29uRGF0YSA9IHsNCiAgICAgICAgc2VuZGVyOiBtZXNzYWdlLnNlbmRlciwNCiAgICAgICAgZmlsZU5hbWU6IGAke21lc3NhZ2Uuc2VuZGVyfV8ke3V1aWR9YCwNCiAgICAgICAgZmlsZUV4dGVuc2lvbjogbWVzc2FnZS5maWxlRXh0ZW5zaW9uLA0KICAgICAgICBmaWxlRGF0YTogbWVzc2FnZS5maWxlRGF0YQ0KDQogICAgfTsNCg0KICAgIGZzLndyaXRlRmlsZShmaWxlUGF0aCwgSlNPTi5zdHJpbmdpZnkoanNvbkRhdGEpLCAoZXJyKSA9PiB7DQogICAgICAgIGlmIChlcnIpIHsNCiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoYEVycm9yIHNhdmluZyBmaWxlOiAke2Vycn1gKTsNCiAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgIGNvbnNvbGUubG9nKGBGaWxlIHNhdmVkIHN1Y2Nlc3NmdWxseTogJHtmaWxlUGF0aH1gKTsNCiAgICAgICAgfQ0KICAgIH0pOw0KICAgIGJyb2FkY2FzdE1lc3NhZ2UgPSB7DQogICAgICAgIHNlbmRlcjogIlNlcnZlciIsDQogICAgICAgIHRleHQ6IGBtZXNzYWdlIHNhdmVkIHN1Y2Nlc2Z1bGx5IGF0ICR7ZmlsZVBhdGh9YA0KICAgIH0NCiAgICBjbGllbnRTb2NrZXQud3JpdGUoSlNPTi5zdHJpbmdpZnkoYnJvYWRjYXN0TWVzc2FnZSkpDQp9DQoNCi8vIEZ1bmN0aW9uIHRvIHNlbmQgZmlsZSBjb250ZW50cyB0byBjbGllbnQNCmZ1bmN0aW9uIHNlbmRGaWxlQ29udGVudHMoZmlsZVBhdGgsIGNsaWVudFNvY2tldCkgew0KICAgIC8vIGNvbnNvbGUubG9nKGNvbG9ycy5tYWdlbnRhKyJzZW5mRmlsZUNvbnRlbnRzIGZ1bmN0aW9uIHN0YXJ0ZWQiK2NvbG9ycy5yZXNldCkNCiAgICB0cnkgew0KICAgICAgICBjb25zdCBmaWxlQ29udGVudHMgPSBmcy5yZWFkRmlsZVN5bmMoZmlsZVBhdGgsICd1dGY4Jyk7DQogICAgICAgIGNvbnN0IGZpbGVJbmZvID0gSlNPTi5wYXJzZShmaWxlQ29udGVudHMpOw0KICAgICAgICBjb25zdCBmaWxlRGF0YSA9IGZpbGVJbmZvLmZpbGVEYXRhDQogICAgICAgIGNvbnN0IGZpbGVFeHRlbnNpb24gPSBmaWxlSW5mby5maWxlRXh0ZW5zaW9uDQogICAgICAgIGNvbnN0IGZpbGVOYW1lID0gZmlsZUluZm8uZmlsZU5hbWUNCiAgICAgICAgY29uc3QgbWVzc2FnZSA9IHsNCiAgICAgICAgICAgIHNlbmRlcjogIlNlcnZlciIsDQogICAgICAgICAgICB0eXBlOiAnZmlsZUNvbnRlbnRzJywNCiAgICAgICAgICAgIGNvbnRlbnRzOiBmaWxlRGF0YSwNCiAgICAgICAgICAgIGZpbGVOYW1lOiBmaWxlTmFtZSwgDQogICAgICAgICAgICBmaWxlRXh0ZW5zaW9uOiBmaWxlRXh0ZW5zaW9uDQogICAgICAgIH07DQogICAgICAgIC8vIGNvbnNvbGUubG9nKG1lc3NhZ2UuY29udGVudHMpDQogICAgICAgIGNvbnNvbGUubG9nKGAke2ZpbGVQYXRofSBzZW50YCkNCiAgICAgICAgY2xpZW50U29ja2V0LndyaXRlKEpTT04uc3RyaW5naWZ5KG1lc3NhZ2UpICsgJ1xyXG4nKTsNCiAgICB9IGNhdGNoIChlcnJvcikgew0KICAgICAgICBjb25zb2xlLmVycm9yKCJFcnJvciBvY2N1cnJlZCB3aGlsZSByZWFkaW5nIGZpbGU6IiwgZXJyb3IpOw0KICAgICAgICAvLyBIYW5kbGUgdGhlIGVycm9yIGFzIG5lZWRlZCwgZS5nLiwgc2VuZCBhbiBlcnJvciBtZXNzYWdlIHRvIHRoZSBjbGllbnQNCiAgICB9DQp9DQoNCi8vIENyZWF0ZSBhIFRDUCBzZXJ2ZXINCmNvbnN0IHNlcnZlciA9IG5ldC5jcmVhdGVTZXJ2ZXIoY2xpZW50U29ja2V0ID0+IHsNCiAgICAvLyBHZW5lcmF0ZSBhIHVuaXF1ZSBJRCBmb3IgdGhlIGNsaWVudA0KICAgIGNvbnN0IGNsaWVudElkID0gbmV4dENsaWVudElkKys7DQoNCiAgICAvLyBBZGQgdGhlIG5ldyBjbGllbnQgdG8gdGhlIGFycmF5DQogICAgY2xpZW50cy5wdXNoKHsgaWQ6IGNsaWVudElkLCBzb2NrZXQ6IGNsaWVudFNvY2tldCB9KTsNCg0KICAgIC8vIFNldCB1cCBldmVudCBsaXN0ZW5lcnMgZm9yIGRhdGEsIGVuZCwgYW5kIGVycm9yIGV2ZW50cw0KICAgIGNsaWVudFNvY2tldC5vbignZGF0YScsIGRhdGEgPT4gew0KICAgICAgICBjb25zdCBtZXNzYWdlID0gSlNPTi5wYXJzZShkYXRhLnRvU3RyaW5nKCkudHJpbSgpKTsNCiAgICAgICAgDQogICAgICAgIC8vIENoZWNrIGlmIGl0J3MgdGhlIGluaXRpYWwgbWVzc2FnZSB1cG9uIGNvbm5lY3Rpb24NCiAgICAgICAgaWYgKG1lc3NhZ2UuY2xpZW50VmVyc2lvbk51bWJlciA9PT0gQUxMT1dFRF9WRVJTSU9OKSB7DQogICAgICAgICAgICBpZiAobWVzc2FnZS50eXBlID09PSAnbGVhdmluZycpIHsNCiAgICAgICAgICAgICAgICBoYW5kbGVFeGl0aW5nTWVzc2FnZShtZXNzYWdlLCBjbGllbnRTb2NrZXQpOw0KICAgICAgICAgICAgfSBlbHNlIGlmIChtZXNzYWdlLnR5cGUgPT09ICdhdXRoZW50aWNhdGlvbicpIHsNCiAgICAgICAgICAgICAgICBoYW5kbGVJbml0aWFsTWVzc2FnZShtZXNzYWdlLCBjbGllbnRTb2NrZXQpOw0KICAgICAgICAgICAgfSBlbHNlIGlmIChtZXNzYWdlLnR5cGUgPT09ICdjb21tYW5kJykgew0KICAgICAgICAgICAgICAgIHN3aXRjaChtZXNzYWdlLmNvbW1hbmQpew0KICAgICAgICAgICAgICAgIGNhc2UgInRpbWUiOg0KICAgICAgICAgICAgICAgICAgICBzZW5kU2VydmVyVGltZShjbGllbnRTb2NrZXQpOw0KICAgICAgICAgICAgICAgICAgICBicmVhaw0KICAgICAgICAgICAgICAgIGNhc2UgInNlbmRGaWxlIjoNCiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coInNlbmQgZmlsZSBjYXNlIikNCiAgICAgICAgICAgICAgICAgICAgc2F2ZUZpbGUobWVzc2FnZSwgY2xpZW50U29ja2V0KQ0KICAgICAgICAgICAgICAgICAgICANCiAgICAgICAgICAgICAgICAgICAgYnJlYWsNCiAgICAgICAgICAgICAgICBjYXNlICJkb3dubG9hZEZpbGUiOg0KICAgICAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhjb2xvcnMubWFnZW50YSsiZG93bmxvYWRGaWxlIGNvbW1hbmQgcmVjZWl2ZWQiK2NvbG9ycy5yZXNldCkNCiAgICAgICAgICAgICAgICAgICAgc2VuZEZpbGVDb250ZW50cyhtZXNzYWdlLmZpbGVQYXRoLCBjbGllbnRTb2NrZXQpOw0KICAgICAgICAgICAgICAgICAgICBicmVhazsNCiAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgDQogICAgICAgICAgICAgICAgDQogICAgICAgICAgICB9IA0KICAgICAgICAgICAgDQogICAgICAgICAgICBlbHNlIHsNCiAgICAgICAgICAgICAgICBjb25zdCBtZXNzYWdlU2l6ZUJ5dGVzID0gQnVmZmVyLmJ5dGVMZW5ndGgoSlNPTi5zdHJpbmdpZnkobWVzc2FnZSksICd1dGY4Jyk7DQogICAgICAgICAgICAgICAgY29uc3QgbWVzc2FnZVNpemVNQiA9IG1lc3NhZ2VTaXplQnl0ZXMgLyAoMTAyNCAqIDEwMjQpOyAvLyBDb252ZXJ0IGJ5dGVzIHRvIG1lZ2FieXRlcw0KICAgICAgICAgICAgICAgIC8vIEJyb2FkY2FzdCB0aGUgbWVzc2FnZSB0byBhbGwgY2xpZW50cw0KICAgICAgICAgICAgICAgIGJyb2FkY2FzdChkYXRhLnRvU3RyaW5nKCksIGNsaWVudFNvY2tldCk7DQogICAgICAgICAgICAgICAgY29uc29sZS5sb2coYCR7bWVzc2FnZS5zZW5kZXJ9IC0gJHtjb2xvcnMueWVsbG93fSR7bWVzc2FnZS5jbGllbnRWZXJzaW9uTnVtYmVyfToke2NvbG9ycy5yZXNldH0gICR7bWVzc2FnZS50ZXh0fSAke21lc3NhZ2VTaXplTUJ9IE1CYCk7DQogICAgICAgICAgICB9DQogICAgICAgICAgICANCiAgICAgICAgICAgIA0KICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgY2xpZW50U29ja2V0LmVuZCgpOyAvLyBDbG9zZSB0aGUgY29ubmVjdGlvbiBpbW1lZGlhdGVseQ0KICAgICAgICB9DQogICAgfSk7DQoNCiAgICBjbGllbnRTb2NrZXQub24oJ2VuZCcsICgpID0+IHsNCiAgICAgICAgLy8gUmVtb3ZlIHRoZSBjbGllbnQgZnJvbSB0aGUgYXJyYXkgd2hlbiBpdCBkaXNjb25uZWN0cw0KICAgICAgICBjb25zdCBpbmRleCA9IGNsaWVudHMuZmluZEluZGV4KGNsaWVudCA9PiBjbGllbnQuc29ja2V0ID09PSBjbGllbnRTb2NrZXQpOw0KICAgICAgICBpZiAoaW5kZXggIT09IC0xKSB7DQogICAgICAgICAgICBjbGllbnRzLnNwbGljZShpbmRleCwgMSk7DQogICAgICAgIH0NCiAgICB9KTsNCg0KICAgIGNsaWVudFNvY2tldC5vbignZXJyb3InLCBlcnIgPT4gew0KICAgICAgICBjb25zb2xlLmVycm9yKGNvbG9ycy5yZWQrJ0NsaWVudCBlcnJvcjonLCBlcnIrY29sb3JzLnJlc2V0KTsNCiAgICB9KTsNCn0pOw0KDQovLyBTdGFydCBsaXN0ZW5pbmcgZm9yIGNvbm5lY3Rpb25zDQpzZXJ2ZXIubGlzdGVuKFBPUlQsICgpID0+IHsNCiAgICBjb25zb2xlLmxvZyhgQ2hhdCBzZXJ2ZXIgaXMgcnVubmluZyBvbiBwb3J0YCtjb2xvcnMueWVsbG93K2AgJHtQT1JUfWArY29sb3JzLnJlc2V0KTsNCn0pOw0K"}